<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ending — Cảm ơn</title>
  <style>
    :root{
      --bg:#000;
      --text:#fff;
      --muted:rgba(255,255,255,0.65);
      --letterbox-h:64px;
      --credits-duration:25s; /* chỉnh tốc độ */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Frame */
    .frame{
      width:100vw;
      height:100vh;
      position:relative;
      padding:48px 20px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Letterbox bars */
    .bar{position:absolute;left:0;right:0;height:var(--letterbox-h);background:linear-gradient(#000,#000);z-index:40}
    .bar.top{top:0}
    .bar.bottom{bottom:0}

    /* Center hero */
    .hero{
      max-width:900px;
      width:100%;
      text-align:center;
      z-index:10;
      padding:0 12px;
    }
    .title{font-size:clamp(36px,8vw,96px);font-weight:800;letter-spacing:6px;margin:0}
    .subtitle{margin-top:12px;color:var(--muted);font-size:clamp(14px,2vw,20px)}

    /* Credits window */
    .credits-viewport{
      height:44vh;
      max-height:520px;
      margin:28px auto 0;
      overflow:hidden;
      position:relative;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:0 12px;
    }

    .credits{
      width:100%;
      max-width:700px;
      transform-origin:center top;
      text-align:center;
      line-height:1.6;
      font-size:18px;
      animation:scrollUp var(--credits-duration) linear infinite;
    }

    @keyframes scrollUp{
      0%{transform:translateY(100%)}
      100%{transform:translateY(-110%)}
    }

    /* small caps, spacing to feel cinematic */
    .section-title{font-weight:700;margin-top:18px;margin-bottom:8px;letter-spacing:2px}
    .muted{color:var(--muted);font-size:14px}

    /* Buttons */
    .controls{margin-top:18px;display:flex;gap:12px;justify-content:center}
    .btn{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.06);color:var(--text);padding:8px 14px;border-radius:8px;cursor:pointer}
    .btn:active{transform:translateY(1px)}

    /* Film grain and vignette */
    .grain{position:absolute;inset:0;z-index:30;pointer-events:none;mix-blend-mode:overlay;opacity:0.06;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600"><filter id="t"><feTurbulence baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23t)" fill="white"/></svg>')}
    .vignette{position:absolute;inset:0;pointer-events:none;z-index:35;background:radial-gradient(ellipse at center, rgba(0,0,0,0) 40%, rgba(0,0,0,0.6) 100%)}

    /* Responsive tweaks */
    @media (max-width:640px){
      .credits{font-size:15px}
    }
  </style>
</head>
<body>
  <div class="frame">
    <div class="bar top"></div>
    <div class="bar bottom"></div>

    <div class="hero">
      <h1 class="title">CẢM ƠN</h1>
      <p class="subtitle">Gửi tới thầy cô và tất cả mọi người đã đồng hành cùng bài thuyết trình</p>

      <div class="credits-viewport" aria-hidden="false">
        <div class="credits" id="credits">

          <h3 class="section-title">NHÓM 4 ĐI MUA CƠM SƯỜN 12A3</h3>
          <div id="teamList"></div>

          <h3 class="section-title">Lời cảm ơn đặc biệt</h3>
          <div id="teachersList"></div>

          <h3 class="section-title">Gửi đến mọi người</h3>
          <div id="thanksList"></div>

          <div style="height:60px"></div>
          <!-- <div class="muted">Màn hình kết thúc — Hẹn gặp lại ở phần tiếp theo</div> -->
        </div>
      </div>

      <!-- <div class="controls">
        <button class="btn" id="playBtn">Bật nhạc</button>
        <button class="btn" id="pauseBtn">Tạm dừng credit</button>
        <button class="btn" id="restartBtn">Khởi động lại</button>
      </div> -->

    </div>

    <div class="grain"></div>
    <div class="vignette"></div>
  </div>

  <!-- Audio (thay đường dẫn bằng tệp của bạn) -->
  <audio id="bgAudio" loop preload="auto">
    <source src="/music/cinematic-ending.mp3" type="audio/mpeg">
    <!-- Nếu muốn, bạn có thể thay bằng đường dẫn tới file mp3 trực tuyến hoặc local -->
  </audio>

  <script>
    // DỄ CHỈNH: sửa mảng bên dưới để thay tên/ghi chú
    const team = [
      'Thành viên nhóm:',
      'ĐÀO CÔNG HUÂN (Làm Slide)',
      'TRẦN MINH ĐẠT (Làm Slide)',
      'PHẠM NGUYỄN HỒNG ĐỨC (Làm nội dung)',
      'NGUYỄN PHẠM PHƯỚC NGUYÊN (Làm nội dung)',
      'NGUYỄN XUÂN BÁCH (Làm nội dung)',
      'HOÀNG NHẬT MINH (Xách nước bổ cam)'
    ];

    // const teachers = [
    //   'Cô: Huỳnh Ái Hậu',
    // ];
    const thanks = [
      'Cảm ơn các bạn đã lắng nghe và ủng hộ',
      'Chúc mọi người một ngày tốt lành!'
    ];

    // Render nội dung
    function renderList(id, arr){
      const container = document.getElementById(id);
      container.innerHTML = '';
      arr.forEach(text => {
        const div = document.createElement('div');
        div.textContent = text;
        container.appendChild(div);
      });
    }

    renderList('teamList', team);
    renderList('teachersList', teachers);
    renderList('thanksList', thanks.map(t => '“' + t + '”'));

    // Controls
    const audio = document.getElementById('bgAudio');
    const playBtn = document.getElementById('playBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const restartBtn = document.getElementById('restartBtn');
    const creditsEl = document.getElementById('credits');

    playBtn.addEventListener('click', () => {
      audio.play().catch(()=>{
        // autoplay may be blocked; inform user via button text
        playBtn.textContent = 'Nhấn phát trên trình duyệt';
      });
    });

    pauseBtn.addEventListener('click', () => {
      const running = getComputedStyle(creditsEl).animationPlayState !== 'paused';
      creditsEl.style.animationPlayState = running ? 'paused':'running';
      pauseBtn.textContent = running ? 'Tiếp tục credit' : 'Tạm dừng credit';
    });

    restartBtn.addEventListener('click', () => {
      // restart animation by reflow hack
      creditsEl.style.animation = 'none';
      // force reflow
      // eslint-disable-next-line no-unused-expressions
      creditsEl.offsetHeight;
      creditsEl.style.animation = '';
    });

    // Optional: Pause audio when tab hidden
    document.addEventListener('visibilitychange', ()=>{
      if(document.hidden){
        audio.pause();
      }
    });

    // Allow easy speed change via URL param ?speed=30 (seconds)
    (function applySpeedFromParam(){
      const p = new URLSearchParams(location.search).get('speed');
      if(p){
        const n = Number(p);
        if(!isNaN(n) && n>5){
          document.documentElement.style.setProperty('--credits-duration', n + 's');
        }
      }
    })();
  </script>
</body>
</html>